{"version":3,"file":"extra-uml-30be4556.js","sources":["../../../src/js/extra-uml.js","../../../src/js/uml.js"],"sourcesContent":["import uml from \"./uml\"\n\n(() => {\n  const onReady = function(fn) {\n    document.addEventListener(\"DOMContentLoaded\", fn)\n    document.addEventListener(\"DOMContentSwitch\", fn)\n  }\n\n  const observer = new MutationObserver(mutations => {\n    mutations.forEach(mutation => {\n      if (mutation.type === \"attributes\") {\n        let scheme = mutation.target.getAttribute(\"data-md-color-scheme\")\n        if (!scheme) {\n          scheme = \"default\"\n        }\n        localStorage.setItem(\"data-md-color-scheme\", scheme)\n        if (typeof mermaid !== \"undefined\") {\n          uml(\"mermaid\")\n        }\n      }\n    })\n  })\n\n  onReady(() => {\n    observer.observe(document.querySelector(\"body\"), {attributeFilter: [\"data-md-color-scheme\"]})\n\n    if (typeof mermaid !== \"undefined\") {\n      uml(\"mermaid\")\n    }\n  })\n})()\n","/* Notes (as of Mermaid 8.7.0):\n * - Gantt: width is always relative to the parent, if you have a small parent, the chart will be squashed.\n *   Can't help it.\n * - Journey: Suffers from the same issues that Gantt does.\n * - Pie: These charts have no default height or width. Good luck pinning them down to a reasonable size.\n * - Git: The render portion is agnostic to the size of the parent element. But padding of the SVG is relative\n *   to the parent element. You will never find a happy size.\n */\n\n/**\n * Targets special code or div blocks and converts them to UML.\n * @param {string} className is the name of the class to target.\n * @return {void}\n */\nexport default className => {\n\n  // Custom element to encapsulate Mermaid content.\n  class MermaidDiv extends HTMLElement {\n\n    /**\n    * Creates a special Mermaid div shadow DOM.\n    * Works around issues of shared IDs.\n    * @return {void}\n    */\n    constructor() {\n      super()\n\n      // Create the Shadow DOM and attach style\n      const shadow = this.attachShadow({mode: \"open\"})\n      const style = document.createElement(\"style\")\n      style.textContent = `\n      :host {\n        display: block;\n        line-height: initial;\n        font-size: 16px;\n      }\n      div.mermaid {\n        margin: 0;\n        overflow: visible;\n      }`\n      shadow.appendChild(style)\n    }\n  }\n\n  if (typeof customElements.get(\"mermaid-div\") === \"undefined\") {\n    customElements.define(\"mermaid-div\", MermaidDiv)\n  }\n\n  const getFromCode = function(parent) {\n    // Handles <pre><code> text extraction.\n    let text = \"\"\n    for (let j = 0; j < parent.childNodes.length; j++) {\n      const subEl = parent.childNodes[j]\n      if (subEl.tagName.toLowerCase() === \"code\") {\n        for (let k = 0; k < subEl.childNodes.length; k++) {\n          const child = subEl.childNodes[k]\n          const whitespace = /^\\s*$/\n          if (child.nodeName === \"#text\" && !(whitespace.test(child.nodeValue))) {\n            text = child.nodeValue\n            break\n          }\n        }\n      }\n    }\n    return text\n  }\n\n  // We use this to determine if we want the dark or light theme.\n  // This is specific for our MkDocs Material environment.\n  // You should load your configs based on your own environment's needs.\n  const defaultConfig = {\n    startOnLoad: false,\n    theme: \"default\",\n    flowchart: {\n      htmlLabels: false\n    },\n    er: {\n      useMaxWidth: false\n    },\n    sequence: {\n      useMaxWidth: false,\n      noteFontWeight: \"14px\",\n      actorFontSize: \"14px\",\n      messageFontSize: \"16px\"\n    }\n  }\n  mermaid.mermaidAPI.globalReset()\n  // Non Material themes should just use \"default\"\n  let scheme = null\n  try {\n    scheme = document.querySelector(\"[data-md-color-scheme]\").getAttribute(\"data-md-color-scheme\")\n  } catch (err) {\n    scheme = \"default\"\n  }\n  const config = (typeof mermaidConfig === \"undefined\") ?\n    defaultConfig :\n    mermaidConfig[scheme] || (mermaidConfig.default || defaultConfig)\n  mermaid.initialize(config)\n\n  // Find all of our Mermaid sources and render them.\n  const blocks = document.querySelectorAll(`pre.${className}, mermaid-div`)\n  const surrogate = document.querySelector(\"html\")\n  for (let i = 0; i < blocks.length; i++) {\n    const block = blocks[i]\n    const parentEl = (block.tagName.toLowerCase() === \"mermaid-div\") ?\n      block.shadowRoot.querySelector(`pre.${className}`) :\n      block\n\n    // Create a temporary element with the typeset and size we desire.\n    // Insert it at the end of our parent to render the SVG.\n    const temp = document.createElement(\"div\")\n    temp.style.visibility = \"hidden\"\n    temp.style.display = \"display\"\n    temp.style.padding = \"0\"\n    temp.style.margin = \"0\"\n    temp.style.lineHeight = \"initial\"\n    temp.style.fontSize = \"16px\"\n    surrogate.appendChild(temp)\n\n    try {\n      mermaid.mermaidAPI.render(\n        `_mermaind_${i}`,\n        getFromCode(parentEl),\n        content => {\n          const el = document.createElement(\"div\")\n          el.className = className\n          el.innerHTML = content\n\n          // Insert the render where we want it and remove the original text source.\n          // Mermaid will clean up the temporary element.\n          const shadow = document.createElement(\"mermaid-div\")\n          shadow.shadowRoot.appendChild(el)\n          block.parentNode.insertBefore(shadow, block)\n          parentEl.style.display = \"none\"\n          shadow.shadowRoot.appendChild(parentEl)\n          if (parentEl !== block) {\n            block.parentNode.removeChild(block)\n          }\n        },\n        temp\n      )\n    } catch (err) {} // eslint-disable-line no-empty\n\n    if (surrogate.contains(temp)) {\n      surrogate.removeChild(temp)\n    }\n  }\n}\n"],"names":["fn","observer","className","MermaidDiv","shadow","attachShadow","mode","style","document","createElement","textContent","appendChild","HTMLElement","customElements","get","define","defaultConfig","startOnLoad","theme","flowchart","htmlLabels","er","useMaxWidth","sequence","noteFontWeight","actorFontSize","messageFontSize","mermaid","mermaidAPI","globalReset","scheme","querySelector","getAttribute","err","config","mermaidConfig","initialize","blocks","querySelectorAll","surrogate","i","block","parentEl","tagName","toLowerCase","shadowRoot","temp","visibility","display","padding","margin","lineHeight","fontSize","render","parent","text","j","childNodes","length","subEl","k","child","nodeName","test","nodeValue","getFromCode","content","el","innerHTML","parentNode","insertBefore","removeChild","contains","MutationObserver","mutations","forEach","mutation","type","target","localStorage","setItem","uml","observe","attributeFilter","addEventListener"],"mappings":"ulDAG2BA,EAKnBC,ICMO,SAAAC,OAGPC,shBAWIC,mBAAcC,aAAa,CAACC,KAAM,SAClCC,EAAQC,SAASC,cAAc,gBACrCF,EAAMG,uMAUNN,EAAOO,YAAYJ,iBAvBEK,mBA2BwB,IAAtCC,eAAeC,IAAI,gBAC5BD,eAAeE,OAAO,cAAeZ,OAyBjCa,EAAgB,CACpBC,aAAa,EACbC,MAAO,UACPC,UAAW,CACTC,YAAY,GAEdC,GAAI,CACFC,aAAa,GAEfC,SAAU,CACRD,aAAa,EACbE,eAAgB,OAChBC,cAAe,OACfC,gBAAiB,SAGrBC,QAAQC,WAAWC,kBAEfC,EAAS,SAEXA,EAAStB,SAASuB,cAAc,0BAA0BC,aAAa,wBACvE,MAAOC,GACPH,EAAS,cAELI,EAAmC,oBAAlBC,cACrBnB,EACAmB,cAAcL,IAAYK,cAAa,SAAYnB,EACrDW,QAAQS,WAAWF,WAGbG,EAAS7B,SAAS8B,+BAAwBpC,oBAC1CqC,EAAY/B,SAASuB,cAAc,mBAChCS,OACDC,EAAQJ,EAAOG,GACfE,EAA4C,gBAAhCD,EAAME,QAAQC,cAC9BH,EAAMI,WAAWd,4BAAqB7B,IACtCuC,EAIIK,EAAOtC,SAASC,cAAc,OACpCqC,EAAKvC,MAAMwC,WAAa,SACxBD,EAAKvC,MAAMyC,QAAU,UACrBF,EAAKvC,MAAM0C,QAAU,IACrBH,EAAKvC,MAAM2C,OAAS,IACpBJ,EAAKvC,MAAM4C,WAAa,UACxBL,EAAKvC,MAAM6C,SAAW,OACtBb,EAAU5B,YAAYmC,OAGpBnB,QAAQC,WAAWyB,2BACJb,GAzEC,SAASc,WAEvBC,EAAO,GACFC,EAAI,EAAGA,EAAIF,EAAOG,WAAWC,OAAQF,IAAK,KAC3CG,EAAQL,EAAOG,WAAWD,MACI,SAAhCG,EAAMhB,QAAQC,kBACX,IAAIgB,EAAI,EAAGA,EAAID,EAAMF,WAAWC,OAAQE,IAAK,KAC1CC,EAAQF,EAAMF,WAAWG,MAER,UAAnBC,EAAMC,WADS,QAC4BC,KAAKF,EAAMG,WAAa,CACrET,EAAOM,EAAMG,yBAMdT,EA0DHU,CAAYvB,IACZ,SAAAwB,OACQC,EAAK3D,SAASC,cAAc,OAClC0D,EAAGjE,UAAYA,EACfiE,EAAGC,UAAYF,MAIT9D,EAASI,SAASC,cAAc,eACtCL,EAAOyC,WAAWlC,YAAYwD,GAC9B1B,EAAM4B,WAAWC,aAAalE,EAAQqC,GACtCC,EAASnC,MAAMyC,QAAU,OACzB5C,EAAOyC,WAAWlC,YAAY+B,GAC1BA,IAAaD,GACfA,EAAM4B,WAAWE,YAAY9B,KAGjCK,GAEF,MAAOb,IAELM,EAAUiC,SAAS1B,IACrBP,EAAUgC,YAAYzB,IA1CjBN,EAAI,EAAGA,EAAIH,EAAOqB,OAAQlB,MAA1BA,ID9FHvC,EAAW,IAAIwE,kBAAiB,SAAAC,GACpCA,EAAUC,SAAQ,SAAAC,MACM,eAAlBA,EAASC,KAAuB,KAC9B/C,EAAS8C,EAASE,OAAO9C,aAAa,wBACrCF,IACHA,EAAS,WAEXiD,aAAaC,QAAQ,uBAAwBlD,GACtB,oBAAZH,SACTsD,EAAI,kBAdajF,EAoBjB,WACNC,EAASiF,QAAQ1E,SAASuB,cAAc,QAAS,CAACoD,gBAAiB,CAAC,0BAE7C,oBAAZxD,SACTsD,EAAI,YAvBNzE,SAAS4E,iBAAiB,mBAAoBpF,GAC9CQ,SAAS4E,iBAAiB,mBAAoBpF"}